<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Man Thong Auto | Premium Stock</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --accent: #f59e0b;
            --bg-body: #f8fafc;
            --card-bg: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --glass: rgba(255, 255, 255, 0.8);
            --radius-lg: 20px;
            --radius-md: 12px;
            --shadow-sm: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        /* --- È´òÁ¥ö Header --- */
        .header {
            background: var(--glass);
            backdrop-filter: blur(12px);
            padding: 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-area h1 {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--primary), #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* --- ÊêúÁ¥¢ËàáÊåâÈàï --- */
        .controls {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 16px 20px 16px 50px;
            border-radius: var(--radius-md);
            border: 1px solid #e2e8f0;
            background: white;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
            transform: translateY(-2px);
        }

        /* --- ËªäËºõÂç°ÁâáÁ∂≤Ê†º --- */
        .car-grid {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }

        .car-card {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            position: relative;
            border: 1px solid rgba(0,0,0,0.03);
            display: flex;
            flex-direction: column;
        }

        .car-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-xl);
        }

        /* Morph ÊïàÊûúÔºöÂÖßÈÉ®Ë£ùÈ£æ */
        .car-card::after {
            content: '';
            position: absolute;
            top: 0; right: 0;
            width: 100px; height: 100px;
            background: var(--primary);
            filter: blur(80px);
            opacity: 0;
            transition: var(--transition);
            z-index: 0;
        }

        .car-card:hover::after {
            opacity: 0.1;
        }

        .card-image-placeholder {
            width: 100%;
            height: 200px;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #cbd5e1;
            font-size: 3rem;
        }

        .card-content {
            padding: 24px;
            z-index: 1;
        }

        .brand-tag {
            font-size: 0.75rem;
            text-transform: uppercase;
            font-weight: 700;
            color: var(--primary);
            letter-spacing: 1px;
            margin-bottom: 8px;
            display: block;
        }

        .model-name {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .spec-info {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 16px;
        }

        .car-details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8fafc;
            border-radius: var(--radius-md);
        }

        .detail-item {
            font-size: 0.85rem;
        }

        .detail-item span {
            display: block;
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .price-area {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: auto;
        }

        .main-price {
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--primary);
        }

        .main-price small {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 400;
        }

        /* --- Ê®ôÁ±§Ê®£Âºè --- */
        .status-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 6px 14px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            background: white;
            box-shadow: var(--shadow-sm);
        }

        .branch-tag {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 700;
            color: white;
            background: var(--accent);
        }

        /* --- ‰∫§‰∫íÊåâÈàï --- */
        .btn {
            padding: 12px 24px;
            border-radius: var(--radius-md);
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-morph);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary { background: var(--primary); color: white; }
        .btn-outline { background: transparent; border: 1.5px solid #e2e8f0; }
        .btn-outline:hover { border-color: var(--primary); color: var(--primary); }

        .action-bar {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            padding: 12px 24px;
            border-radius: 50px;
            display: flex;
            gap: 15px;
            box-shadow: var(--shadow-xl);
            z-index: 1001;
        }

        .action-bar button {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0.8;
            transition: 0.3s;
        }

        .action-bar button:hover { opacity: 1; transform: translateY(-3px); }

        /* --- Calculator Morph --- */
        #calc-toggle {
            position: fixed;
            right: 30px;
            bottom: 100px;
            width: 60px; height: 60px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 999;
            font-size: 24px;
        }

        @media (max-width: 600px) {
            .car-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="logo-area">
            <div style="width: 40px; height: 40px; background: var(--primary); border-radius: 10px;"></div>
            <h1>Man Thong Auto</h1>
        </div>
        <div class="user-actions">
            <button class="btn btn-outline" onclick="openAddModal()">+ Add Stock</button>
        </div>
    </header>

    <div class="controls">
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search premium cars by model, brand or plate...">
        </div>
    </div>

    <main class="car-grid" id="carGrid">
        </main>

    <div class="action-bar">
        <button onclick="exportData()"><span>üì§</span>Export</button>
        <button onclick="importGitHub()"><span>üîÑ</span>Sync</button>
        <button onclick="location.reload()"><span>üè†</span>Home</button>
    </div>

    <div id="calc-toggle" onclick="toggleCalc()">üßÆ</div>

    <div id="calcModal" style="display:none; position:fixed; bottom:170px; right:30px; width:300px; background:white; padding:25px; border-radius:20px; box-shadow:var(--shadow-xl); z-index:1000;">
        <h3 style="margin-bottom:15px">Loan Estimator</h3>
        <p style="font-size:0.8rem; color:var(--text-muted); margin-bottom:10px">Powered by 365 Bank (Special Rate)</p>
        <label style="font-size:0.8rem">OTR Price (RM)</label>
        <input type="number" id="calcPrice" style="width:100%; padding:10px; margin-bottom:15px; border:1px solid #ddd; border-radius:8px">
        <div id="calcResult" style="padding:15px; background:var(--bg-body); border-radius:12px; text-align:center">
            <div style="font-size:0.7rem; color:var(--text-muted)">365 Bank Monthly (3Y / 10%)</div>
            <div id="monthlyVal" style="font-size:1.5rem; font-weight:800; color:var(--primary)">RM 0</div>
        </div>
    </div>

    <script>
        // ÂçáÁ∫ßÂêéÁöÑÊï∞ÊçÆÁªìÊûÑ
        let carData = [
            { 
                brand: "Proton", 
                model: "X70 1.8 PREMIUM", 
                year: "2019", 
                spec: "1.8 Premium", 
                colour: "Snow White", 
                plate: "VDB7826", 
                price: 58800, 
                proc_fee: 3800, 
                branch: "manthong", 
                status: "ready", 
                image: "" 
            },
            { 
                brand: "Perodua", 
                model: "Myvi 1.5 AV", 
                year: "2021", 
                spec: "Advanced Edition", 
                colour: "Electric Blue", 
                plate: "VGA7888", 
                price: 45000, 
                proc_fee: 2800, 
                branch: "everforward", 
                status: "booked", 
                image: "" 
            }
        ];

        function renderCars(data) {
            const grid = document.getElementById('carGrid');
            grid.innerHTML = '';

            data.forEach((car, index) => {
                const total = car.price + (parseInt(car.proc_fee) || 0);
                const card = document.createElement('div');
                card.className = 'car-card';
                card.innerHTML = `
                    <div class="card-image-placeholder">üöó</div>
                    <span class="branch-tag" style="background:${car.branch === 'manthong' ? '#2563eb' : '#8b5cf6'}">
                        ${car.branch.toUpperCase()}
                    </span>
                    <span class="status-badge" style="color:${car.status === 'ready' ? '#10b981' : '#f59e0b'}">
                        ‚óè ${car.status.toUpperCase()}
                    </span>
                    <div class="card-content">
                        <span class="brand-tag">${car.brand}</span>
                        <h2 class="model-name">${car.model}</h2>
                        <p class="spec-info">${car.spec} | ${car.colour}</p>
                        
                        <div class="car-details-grid">
                            <div class="detail-item"><span>Year</span><strong>${car.year}</strong></div>
                            <div class="detail-item"><span>Plate</span><strong>${car.plate}</strong></div>
                            <div class="detail-item"><span>Processing</span><strong>RM ${car.proc_fee}</strong></div>
                            <div class="detail-item"><span>Location</span><strong>Main Store</strong></div>
                        </div>

                        <div class="price-area">
                            <div class="main-price">
                                <small>RM</small> ${car.price.toLocaleString()}
                            </div>
                            <button class="btn btn-primary" onclick="contactWa('${car.model}')">Inquire</button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // 365Èì∂Ë°åÂÄüË¥∑ÈÄªËæëÈõÜÊàê (Âü∫‰∫é‰Ω†‰πãÂâçÁöÑ‰ø°ÊÅØ: ÊúÄÂ§ö20000, 3Âπ¥, 10%Âà©Áéá)
        function calculate365Loan(amount) {
            const loanLimit = 20000;
            const interestRate = 0.10; // 10%
            const years = 3;
            
            // ÂÅáËÆæÁî®Êà∑ÂÄüÊúÄÈ´òÈôêÈ¢ùÊàñËΩ¶‰ª∑ÊÄªÈ¢ù‰∏≠ÁöÑËæÉÂ∞èËÄÖ
            const principal = Math.min(amount, loanLimit);
            const totalInterest = principal * interestRate * years;
            const monthly = (principal + totalInterest) / (years * 12);
            return monthly.toFixed(2);
        }

        function toggleCalc() {
            const modal = document.getElementById('calcModal');
            modal.style.display = modal.style.display === 'none' ? 'block' : 'none';
        }

        document.getElementById('calcPrice').addEventListener('input', (e) => {
            const val = e.target.value;
            if(val > 0) {
                const m = calculate365Loan(val);
                document.getElementById('monthlyVal').innerText = `RM ${m}`;
            }
        });

        function contactWa(model) {
            window.open(`https://wa.me/60105000111?text=Interested in ${model}`);
        }

        // ÂàùÂßãÂåñ
        renderCars(carData);

        // ÊêúÁ¥¢ÈÄªËæë
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = carData.filter(c => 
                c.model.toLowerCase().includes(term) || 
                c.brand.toLowerCase().includes(term) || 
                c.plate.toLowerCase().includes(term)
            );
            renderCars(filtered);
        });
    </script>
</body>
</html>
